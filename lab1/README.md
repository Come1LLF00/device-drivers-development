# Лабораторная работа 1

**Название:** "Разработка драйверов символьных устройств"

**Цель работы:** разработать драйвер символьного устройства

## Описание функциональности драйвера

В файловой системе создаются два файла:
* `/dev/var2`
* `/proc/var2`
Первый имеет функциональность, что при чтении из него выдаются последовательно `5` последних решений. А при записе в него простых выражений вида `argoparg`, где `arg` -- это целые числа, а `op` -- это символ операции, которую нужно сотворить с этими аргументами. Список поддерживаемых операций:
* `+` -- сложение
* `-` -- вычитание
* `*` -- умножение
* `/` -- деление

## Инструкция по сборке

```
make # собрать исходники
sudo make load # загрузить модуль
sudo make mkdev # создать узел устройства
```
### Дополнительно

```
sudo make unload # выгрузить загруженный модуль
sudo make rmdev # удалить созданный узел устройства
```

## Инструкция пользователя

1. Собрать модуль
2. Загрузить модуль
3. Создать узел для устройства
4. Писать в узел простые выражения ( без пробелов и прочих разделителей, все слитно -- операнд операция операнд ). Контроль за некорректными математическими действиями осуществляется на стороне прикладных программ и пользователя.
5. Читать из узла для получение ранее вычисленных выражений, на одно чтение по кругу выводятся последовательно пять последних результатов
6. При чтении из файла `/proc/var2` проверять лог для того, чтобы увидеть результат чтения
7. По завершению работы выгрузить модуль и удалить созданный узел с помощью соответствующих целей в `Makefile` 

## Примеры использования

### Пример работы с `/dev/var2`
```
echo "-3+8" > /dev/var2
cat /dev/var2
-------------
5
```

### Пример работы с `/proc/var2`
```
cat /proc/var2
sudo dmesg -c
----------
[  590.119804] chr_comp: file /proc/var2 opened
[  590.119817] chr_comp: proc_var2_read: 5
[  590.181147] chr_comp: file /proc/var2 closed
```


